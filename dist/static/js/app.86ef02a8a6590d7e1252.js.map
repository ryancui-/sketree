{"version":3,"sources":["webpack:///src/components/TreePad.vue","webpack:///./src/components/TreePad.vue","webpack:///./src/components/TreePad.vue?0a37","webpack:///src/components/TreeDisplay.vue","webpack:///./src/components/TreeDisplay.vue","webpack:///src/App.vue","webpack:///./src/components/TreeDisplay.vue?26f8","webpack:///./src/App.vue","webpack:///./src/App.vue?fb52","webpack:///./src/utils/tree-util.js","webpack:///./src/store.js","webpack:///./src/main.js"],"names":["TreePad","name","data","canvas","selectedNode","mounted","this","init","computed","extends_default","Object","vuex_esm","methods","_this","fabric","Canvas","setDimensions","width","height","selection","document","documentElement","addEventListener","e","keyCode","removeTreeNode","addTreeNode","WIDTH","x","y","_this2","parentNode","arguments","length","undefined","circle","Circle","radius","fill","left","top","hasControls","hasRotatingPoint","selectable","stroke","strokeWidth","line","Line","getCenterPoint","hoverCursor","add","moveTo","get","on","_ref","node","target","set","x1","y1","nodes","filter","n","parent","forEach","child","x2","y2","_ref2","children","$store","commit","_this3","remove","__vue_styles__","context","__webpack_require__","components_TreePad","component_normalizer","_h","$createElement","_self","_c","staticClass","attrs","id","TreeDisplay","parseJson","json","treeData","stringify_default","replace","match","cls","test","TreeDisplay___vue_styles__","App","components","domProps","innerHTML","_s","smoothTree","console","log","App___vue_styles__","src_App","_m","_v","click","tree_util","TreeUtils","classCallCheck_default","initID","generateNode","result","newNode","generateChildren","push","vue_esm","use","treeUtils","src_store","Store","state","mutations","addNode","removeNode","idx","findIndex","splice","getters","buildTreeJson","config","productionTip","vue_json_tree_view_min_default","a","el","template","store"],"mappings":"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","file":"static/js/app.86ef02a8a6590d7e1252.js","sourcesContent":["<template>\n  <canvas id=\"pad\" class=\"pad\"></canvas>\n</template>\n\n<script>\n  import { mapState } from 'vuex';\n\n  const RADIUS = 20;\n  const WIDTH = 700;\n  const HEIGHT = 700;\n\n  export default {\n    name: 'TreePad',\n    data() {\n      return {\n        canvas: null,\n        selectedNode: null\n      };\n    },\n    mounted() {\n      this.init();\n    },\n    computed: {\n      ...mapState(['nodes'])\n    },\n    methods: {\n      init() {\n        this.canvas = new fabric.Canvas('pad');\n        this.canvas.setDimensions({ width: WIDTH, height: HEIGHT });\n        this.canvas.selection = false;\n\n        document.documentElement.addEventListener('keydown', (e) => {\n          if (this.selectedNode && (e.keyCode === 46 || e.keyCode === 8)) {\n            this.removeTreeNode(this.selectedNode);\n          }\n        });\n\n        this.addTreeNode((WIDTH / 2) - (RADIUS / 2), 50);\n      },\n      /**\n       * Add a new tree node as a child of parentNode\n       * @param x\n       * @param y\n       * @param parentNode\n       * @return {{circle: *, line: *}}\n       */\n      addTreeNode(x, y, parentNode = null) {\n        const circle = new fabric.Circle({\n          radius: RADIUS,\n          fill: parentNode ? '#fff' : '#bbecff',\n          left: x,\n          top: y,\n          hasControls: false,\n          hasRotatingPoint: false,\n          selectable: !!parentNode,\n          stroke: '#666',\n          strokeWidth: 5\n        });\n        let line = null;\n\n        // Draw a line to parent\n        if (parentNode !== null) {\n          line = new fabric.Line([circle.getCenterPoint().x, circle.getCenterPoint().y,\n            parentNode.circle.getCenterPoint().x, parentNode.circle.getCenterPoint().y], {\n            stroke: '#000',\n            strokeWidth: 3,\n            selectable: false,\n            hoverCursor: 'default'\n          });\n\n          this.canvas.add(line);\n          line.moveTo(parentNode.circle.get('zIndex') - 1);\n        }\n\n        circle.on('selected', () => {\n          this.selectedNode = circle.get('node');\n        });\n        circle.on('deselected', () => {\n          this.selectedNode = null;\n        });\n\n        circle.on('moving', ({ target }) => {\n          const node = target.get('node');\n\n          // Set line to parent\n          if (line !== null) {\n            line.set({\n              x1: circle.getCenterPoint().x,\n              y1: circle.getCenterPoint().y\n            });\n          }\n\n          // Set lines to children\n          const children = this.nodes.filter(n => n.parent === node);\n          children.forEach((child) => {\n            child.line.set({\n              x2: circle.getCenterPoint().x,\n              y2: circle.getCenterPoint().y\n            });\n          });\n        });\n\n        circle.on('mousedblclick', ({ target }) => {\n          const node = target.get('node');\n          const children = this.nodes.filter(n => n.parent === node);\n          this.addTreeNode(target.getCenterPoint().x + (20 * children.length) + 1,\n            target.getCenterPoint().y + 80, node);\n        });\n\n        this.canvas.add(circle);\n        const node = { circle, line, parent: parentNode };\n        node.circle.set('node', node);\n        this.$store.commit('addNode', node);\n\n        return node;\n      },\n      /**\n       * Remove a tree node\n       * @param node\n       */\n      removeTreeNode(node) {\n        // Root is not allow to remove\n        if (!node.parent) {\n          return;\n        }\n\n        const children = this.nodes.filter(n => n.parent === node);\n        children.forEach((child) => {\n          this.removeTreeNode(child);\n        });\n\n        // Remove current node\n        this.canvas.remove(node.circle);\n        if (node.line) {\n          this.canvas.remove(node.line);\n        }\n        this.$store.commit('removeNode', node);\n      }\n    }\n  };\n</script>\n\n<style scoped lang=\"less\">\n  @import 'common.less';\n\n  .pad {\n    .box-wrapper;\n    display: block;\n    background-color: rgba(0, 0, 0, 0.08);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/TreePad.vue","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1f0d426a\\\",\\\"scoped\\\":true,\\\"sourceMap\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TreePad.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreePad.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreePad.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1f0d426a\\\",\\\"hasScoped\\\":true,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TreePad.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1f0d426a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TreePad.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{staticClass:\"pad\",attrs:{\"id\":\"pad\"}})}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1f0d426a\",\"hasScoped\":true,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TreePad.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <pre v-html=\"parseJson\"></pre>\n  </div>\n</template>\n\n<script>\n  import { mapGetters } from 'vuex';\n\n  export default {\n    name: 'TreeDisplay',\n    computed: {\n      parseJson() {\n        let json = this.treeData;\n        if (typeof json !== 'string') {\n          json = JSON.stringify(json, undefined, 2);\n        }\n        json = json.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>');\n        return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, (match) => {\n          let cls = 'number';\n          if (/^\"/.test(match)) {\n            if (/:$/.test(match)) {\n              cls = 'key';\n            } else {\n              cls = 'string';\n            }\n          } else if (/true|false/.test(match)) {\n            cls = 'boolean';\n          } else if (/null/.test(match)) {\n            cls = 'null';\n          }\n          return `<span class=\"${cls}\">${match}</span>`;\n        });\n      },\n      ...mapGetters(['treeData'])\n    }\n  };\n</script>\n\n<style lang=\"less\">\n  @import 'common.less';\n\n  pre {\n    .box-wrapper;\n    padding: 10px;\n    margin: 0;\n  }\n\n  .string {\n    color: green;\n  }\n\n  .number {\n    color: darkorange;\n  }\n\n  .boolean {\n    color: blue;\n  }\n\n  .null {\n    color: magenta;\n  }\n\n  .key {\n    color: red;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/TreeDisplay.vue","function injectStyle (context) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./TreeDisplay.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeDisplay.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TreeDisplay.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-640ed2be\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TreeDisplay.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TreeDisplay.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <div class=\"tree-pad\">\n      <div>\n        <h2>使用说明</h2>\n        <p>1. 双击节点创建子节点</p>\n        <p>2. 选择节点后，按 Backspace/Delete 键删除节点（及其所有子节点）</p>\n      </div>\n      <div class=\"btn-panel\">\n        <button @click=\"smoothTree\">整理</button>\n      </div>\n      <tree-pad></tree-pad>\n    </div>\n    <div class=\"tree-json\">\n      <tree-display></tree-display>\n    </div>\n  </div>\n</template>\n\n<script>\n  import TreePad from './components/TreePad';\n  import TreeDisplay from './components/TreeDisplay';\n\n  export default {\n    name: 'App',\n    components: {\n      TreePad, TreeDisplay\n    },\n    methods: {\n      smoothTree() {\n        console.log(123);\n      }\n    }\n  };\n</script>\n\n<style>\n  * {\n    box-sizing: border-box;\n  }\n\n  html, body {\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    padding: 0;\n    margin: 0;\n  }\n\n  #app {\n    display: flex;\n    height: 100%;\n  }\n\n  .tree-pad, .tree-json {\n    margin: 10px;\n  }\n\n  .tree-pad {\n    flex-basis: 700px;\n  }\n\n  .tree-json {\n    flex-grow: 1;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('pre',{domProps:{\"innerHTML\":_vm._s(_vm.parseJson)}})])}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-640ed2be\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TreeDisplay.vue\n// module id = null\n// module chunks = ","function injectStyle (context) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"optionsId\\\":\\\"0\\\",\\\"vue\\\":true,\\\"scoped\\\":false,\\\"sourceMap\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e789e20\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"tree-pad\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"btn-panel\"},[_c('button',{on:{\"click\":_vm.smoothTree}},[_vm._v(\"整理\")])]),_vm._v(\" \"),_c('tree-pad')],1),_vm._v(\" \"),_c('div',{staticClass:\"tree-json\"},[_c('tree-display')],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"使用说明\")]),_vm._v(\" \"),_c('p',[_vm._v(\"1. 双击节点创建子节点\")]),_vm._v(\" \"),_c('p',[_vm._v(\"2. 选择节点后，按 Backspace/Delete 键删除节点（及其所有子节点）\")])])}]\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2e789e20\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","/**\n * Tree operation method\n */\n\nclass TreeUtils {\n  constructor() {\n    this.initID = 0;\n  }\n\n  /**\n   * Build Tree JSON Object\n   * @param nodes\n   */\n  buildTreeJson(nodes) {\n    this.initID = 0;\n    if (nodes.length === 0) {\n      return {};\n    }\n    // By default, the first element is the root\n    return this.generateNode(nodes[0], nodes);\n  }\n\n  newNode() {\n    this.initID += 1;\n    return {\n      id: this.initID,\n      children: []\n    };\n  }\n\n  generateNode(node, nodes) {\n    const result = this.newNode();\n\n    result.children = this.generateChildren(node, nodes);\n\n    return result;\n  }\n\n  generateChildren(node, nodes) {\n    const result = [];\n    nodes.filter(n => n.parent === node).forEach((n) => {\n      result.push(this.generateNode(n, nodes));\n    });\n    return result;\n  }\n}\n\nexport default TreeUtils;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/tree-util.js","import Vuex from 'vuex';\nimport Vue from 'vue';\n\nimport TreeUtils from './utils/tree-util';\n\nVue.use(Vuex);\n\nconst treeUtils = new TreeUtils();\n\nconst store = new Vuex.Store({\n  state: {\n    nodes: []\n  },\n  mutations: {\n    addNode(state, node) {\n      state.nodes.push(node);\n    },\n    removeNode(state, node) {\n      const idx = state.nodes.findIndex(n => n === node);\n      if (idx !== -1) {\n        state.nodes.splice(idx, 1);\n      }\n    }\n  },\n  getters: {\n    treeData(state) {\n      return treeUtils.buildTreeJson(state.nodes);\n    }\n  }\n});\n\nexport default store;\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport TreeView from 'vue-json-tree-view';\n\nimport App from './App';\nimport store from './store';\n\nVue.config.productionTip = false;\n\nVue.use(TreeView);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>',\n  store\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}